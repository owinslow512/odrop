<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sign Up | Odrop</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="fade.css">

<script src="main.js" defer></script>
<script src="fade.js" defer></script>

<style>
.form-box {
  max-width: 400px;
  margin: 80px auto;
  padding: 20px;
  border-radius: 10px;
  background: var(--bg);
  box-shadow: 0 0 12px rgba(0,0,0,0.1);
}
.form-box input {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
}
button {
  width: 100%;
  padding: 10px;
}
</style>
</head>

<body class="fade-in">
<header>
  <h1>Odrop</h1>
</header>

<div class="form-box">
  <h2>Create Account</h2>

  <input id="su_user" placeholder="Username">
  <input id="su_pass" type="password" placeholder="Password">

  <button id="signupBtn">Sign Up</button>

  <p>Already have an account? <a href="login.html">Login</a></p>
  <p id="msg"></p>
</div>

<script>
document.getElementById("signupBtn").addEventListener("click", () => {
  const u = su_user.value.trim();
  const p = su_pass.value.trim();
  const msg = document.getElementById("msg");

  if(!u || !p) {
    msg.textContent = "All fields required";
    return;
  }

  const users = odrop.storage.loadJSON("odrop_users", []);

  if(users.find(x=>x.username === u)) {
    msg.textContent = "Username already exists";
    return;
  }

  users.push({ username: u, password: p });
  odrop.storage.saveJSON("odrop_users", users);

  localStorage.setItem("odrop_user_v1", u);
  localStorage.setItem("odrop_username_ts", Date.now());

  msg.textContent = "Account created âœ… Redirecting...";

  setTimeout(()=> window.location.href = "profile.html", 800);
});
</script>

</body>
</html>

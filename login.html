<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login | Odrop</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="fade.css">

<script src="main.js" defer></script>
<script src="fade.js" defer></script>

<style>
.form-box {
  max-width: 400px;
  margin: 80px auto;
  padding: 20px;
  border-radius: 10px;
  background: var(--bg);
  box-shadow: 0 0 12px rgba(0,0,0,0.1);
}
.form-box input {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
}
button {
  width: 100%;
  padding: 10px;
}
</style>
</head>

<body class="fade-in">
<header>
  <h1>Odrop</h1>
</header>

<div class="form-box">
  <h2>Login</h2>

  <input id="lg_user" placeholder="Username">
  <input id="lg_pass" type="password" placeholder="Password">

  <button id="loginBtn">Login</button>

  <p>No account? <a href="signup.html">Sign Up</a></p>
  <p id="msg"></p>
</div>

<script>
document.getElementById("loginBtn").addEventListener("click", () => {
  const u = lg_user.value.trim();
  const p = lg_pass.value.trim();
  const msg = document.getElementById("msg");

  const users = odrop.storage.loadJSON("odrop_users", []);

  const match = users.find(x=>x.username===u && x.password===p);

  if(!match) {
    msg.textContent = "Invalid login";
    return;
  }

  localStorage.setItem("odrop_user_v1", u);
  localStorage.setItem("odrop_username_ts", Date.now());

  msg.textContent = "Success âœ… Redirecting...";

  setTimeout(()=> window.location.href = "profile.html", 800);
});
</script>

</body>
</html>
